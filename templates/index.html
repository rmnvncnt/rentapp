{% from "_formhelpers.html" import render_field %}
{% extends "base.html" %}

{% block url_form %}
<p>Veuillez indiquer çi-dessous l'adresse URL d'une annonce immobilière :</p>
 <form action="/scraping" method="POST">
 {{ urlform.hidden_tag() }}
  <p>{{ urlform.url }}<input type=submit value="C'est parti!">*</p>
 </form>
<div>
 <p>*L'opération peut prendre plusieurs secondes dans certains cas. Cette application ne fonctionne pour l'instant qu'avec les annonces de biens locatifs parisiens (75) publiées sur www.pap.fr.</p>
</div>
{% endblock %}

{% block attr_form %}
<p> Voici les informations que nous avons pu collecter sur cette annonce. </p>
<p> Si une information vous semble erronée, vous pouvez la corriger ici : </p>
 <form action="/validation" method="POST">
  {{ form.hidden_tag() }}
  <table>
   <tr>
   	<td>Loyer (hors charges)</td>
   	<td>{{ render_field(form.price) }}</td>
   </tr>
   <tr>
   	<td>Surface</td>
   	<td>{{ render_field(form.surface) }}</td>
   </tr>
   <tr>
   	<td>Année de construction</td>
   	<td>{{ render_field(form.year) }}</td>
   </tr>
   <tr>
   	<td>Nombre de pièces</td>
   	<td>{{ render_field(form.rooms) }}</td>
   </tr>
   <tr>
   	<td>Quartier administratif</td>
   	<td>{{ render_field(form.subarea) }}</td>
   </tr>
  </table>
  <input type=submit value="Je valide"></p>
 </form>
{% endblock %}

{% block results %}
 <table>
   <tr>
    <td>Loyer proposé</td>
    <td>{{ refs['price'] }}</td>
   </tr>
   <tr>
    <td>Loyer de référence</td>
    <td>{{ refs['ref'] }}</td>
   </tr>
   <tr>
    <td>Loyer minimum</td>
    <td>{{ refs['refmin'] }}</td>
   </tr>
   <tr>
    <td>Loyer maximum</td>
    <td>{{ refs['refmaj'] }}</td>
   </tr>
  </table>
 <form action="/" method="POST">
  <input type=submit value="Un autre?"></p>
 </form>
{% endblock %}